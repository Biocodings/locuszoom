<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>LocusZoom Plot Builder</title>

  <script src="https://code.jquery.com/jquery-2.1.4.min.js" type="text/javascript"></script>
  <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.css"/>

  <!-- Necessary includes for LocusZoom -->
  <script src="locuszoom.vendor.min.js" type="text/javascript"></script>
  <script src="locuszoom.app.js" type="text/javascript"></script>
  <link rel="stylesheet" type="text/css" href="locuszoom.css"/>

</head>

<body style="background-color: #E8E8E8; margin-left: 20px; margin-right: 20px;">

  <div style="max-width: 100%; clear: both; margin: 0;">

    <div class="row">
      <div class="four columns">
        <h2>LocusZoom Plot Builder</h2>
      </div>
      <div class="eight columns">
        <div class="u-pull-right">
          <a class="button" href="https://github.com/statgen/locuszoom/wiki/API-Reference" target="_blank">API Reference</a>
          <button>Reset Plot</button>
          <button class="button-primary">Apply Layout &amp; State</button>
        </div>
      </div>
    </div>
    
    <div class="row">
      
      <div class="six columns">
        <h5>Layout</h5>
        <textarea id="plot_builder_layout" style="width: 100%; max-width: 100%; min-height: 40px; height: 260px;"></textarea>
        <h5>State</h5>
        <textarea id="plot_builder_state" style="width: 100%; max-width: 100%; min-height: 40px; height: 120px;"></textarea>
      </div>

      <div class="six columns">
        <div id="lz-1" class="lz-container-responsive" data-region="10:114550452-115067678"></div>
      </div>

    </div>

  </div>

  <script type="text/javascript">

    // Define LocusZoom Data Sources object
    var apiBase = "http://portaldev.sph.umich.edu/api/v1/";
    var data_sources = new LocusZoom.DataSources();
    data_sources.addSource("base", ["AssociationLZ", {url:apiBase + "single/", params: {analysis: 3}}]);
    data_sources.addSource("ld", ["LDLZ" ,apiBase + "pair/LD/"]);
    data_sources.addSource("gene", ["GeneLZ", { url: apiBase + "annotation/genes/", params: {source: 2} }]);

    // Populate the div with a LocusZoom plot
    var plot = LocusZoom.populate("#lz-1", data_sources);
    $("#plot_builder_layout").text(JSON.stringify(plot.layout, null, "  "));
    $("#plot_builder_state").text(JSON.stringify(plot.state, null, "  "));

  </script>

</body>
</html>
